云数据库

（文档型数据库）

- 云开发提供了一个JSON数据库

- 集合相当于关系型数据库中的表

- 集合可看做一个JSON数组，数组中的每个对象就是一条记录

- 记录的格式是JSON对象

  

对字段不是强约束，可以根据自己需要，进行各种数据类型的组合

doc为单个查找，

where除了删除外是批量的，支持正则表达式



indis（索引）

1. 空间换时间
2. 不要创建太多索引
3. 针对索引字段得查找，性能更优



云数据库api

lookup：联表查询 

match：查询条件，根据条件过滤

自定义字段：

1. addFields：聚合管道符

   `addFields({<新字段>:<表达式>})`

   可指定多个新字段，每个新字段的值由使用的表达式决定

2. project：把指定的字段传递给下一个流水线，指定的字段可以是某个已经存在的字段，也可以是计算出来的新字段

分组：

1. group：将输入记录按给定表达式分组，输出时每个记录代表一个分组
2. bucket：将输入记录根据给定的条件和边界划分成不同的组，每组即一个bucket （不常用）

分页：

1. sort：排序  1代表升序，-1代表降序

2. sample: 随机从文档中选取指定数量的记录

   ​	参数 size: number（正整数）

3. skip：指定一个正整数，跳过对应数量的文档

4. limit：限制输出到下一阶段的记录数（限制输出数量）

replaceRoot：替换根节点

unwind：指定数组字段中的每个元素，拆分文档，文档从一个变为一个或多个



Geo 数据库地理位置结构集